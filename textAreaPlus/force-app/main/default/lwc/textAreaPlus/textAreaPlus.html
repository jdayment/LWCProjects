<template>
    <template if:true={plainText}>
        <!-- Start Plain Text / TextArea Section -->
            <div class="slds-var-p-around_x-small">
                <lightning-textarea value={textValue} label={label} max-length={maxLength} onchange={handleChange} placeholder={placeHolder} required={required}></lightning-textarea>
            </div>
            <template if:true={showCounter}>
                <div class={charsLeftClass}>
                    {counterText}
                </div>
            </template>
        <!-- Start Plain Text / TextArea Section -->
    </template>    
    <template if:false={plainText}>
        <!-- Start Rich Text Input Section -   -->
        <template if:true={disableAdvancedTools}>
            <div>
                <lightning-input-rich-text value={value} onchange={handleValueChange} 
                    formats={formats} label={label} required={required} onkeydown={handleRichTextKeyDown}
                    label-visible="true" placeholder={placeHolder}></lightning-input-rich-text>
            </div>
        </template>
        <!-- End Rich Text Input Section-->

        <!-- Start Entry Enhancements - only display if enableAdvancedTools activated -->
        <template if:false={disableAdvancedTools}>
            <div>
                <lightning-input-rich-text value={value} formats={formats} label={label}
                    onchange={handleTextChange} onkeydown={handleRichTextKeyDown}
                    label-visible="true" valid={isValidCheck}
                    message-when-bad-input={errorMessage} required={required} placeholder={placeHolder}>
                </lightning-input-rich-text>
            </div>
            <div class="slds-grid slds-wrap slds-var-p-around_xx-small slds-m-bottom_x-small lgc-bg">
                <lightning-button-group>
                    <div class="slds-var-p-around_xxx-small">
                        <lightning-button-icon variant="border-filled" size="medium" icon-name="utility:search"
                            onclick={handleOpenSearch} alternative-text="Open Search and Replace"
                            tooltip="Open Search and Replace">
                                <label>Info</label>
                        </lightning-button-icon>
                    </div>
                    <template if:true={searchButton}>
                        <div class="slds-var-p-around_xxx-small">
                            <lightning-input type="text" placeholder="Search Text" variant="label-hidden" 
                                value={searchTerm} onchange={handleSearchChange}></lightning-input>
                        </div>
                        <div class="slds-var-p-around_xxx-small">
                            <lightning-input type="text" placeholder="Replace with Text" variant="label-hidden"
                                value={replaceValue} onchange={handleReplaceChange}></lightning-input>
                        </div>
                        <div class="slds-var-p-left_xxx-small slds-var-p-right_small slds-var-p-top_xxx-small slds-var-p-bottom_xxx-small">
                            <lightning-button-icon variant="brand" size="medium" icon-name="utility:check"
                                onclick={searchReplace} alternative-text="Search and Replace" tooltip="Search and Replace">
                            </lightning-button-icon>
                        </div>
                    </template>
                    <template if:true={autoReplaceEnabled}>
                        <div class="slds-var-p-around_xxx-small">
                            <lightning-button-icon variant="border-filled" size="medium" icon-name="utility:merge"
                                onclick={applySuggested} alternative-text="Apply Suggested Terms" tooltip="Apply Suggested Terms">
                            </lightning-button-icon>
                        </div>
                    </template>
                    <template if:true={dirty}>
                        <div class="slds-var-p-around_xxx-small">
                            <lightning-button-icon variant="border-filled" size="medium" icon-name="utility:undo"
                                onclick={handleRevert} alternative-text={lastChange} tooltip={lastChange}>
                            </lightning-button-icon>
                        </div>
                    </template>
                    <template if:true={showCounter}>
                        <div class={charsLeftClass}>
                            {counterText}
                        </div>
                    </template>
                    <div class="slds-var-p-left_x-small slds-var-p-right_xxx-small slds-var-p-top_xx-small slds-var-p-bottom_xxx-small">
                        <lightning-helptext content={instructions}></lightning-helptext>
                    </div>
                </lightning-button-group>
            </div>
        </template>
        <!-- End Entry Enhancements --> 
    </template>
</template>
